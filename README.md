# Примитивная база данных
Простая консольная система управления базой данных с использованием процедурного программирования.
## Установка
```bash
poetry build
pip install --force-reinstall dist/primitive_db-0.1.0-py3-none-any.whl
```

## Запуск базы данных
```bash
database
```

# Управление таблицами
## Доступные команды

| Команда | Описание |
|--------|---------|
| `create_table <имя> <столбец1:тип> <столбец2:тип> ...` | Создать таблицу с указанными столбцами |
| `list_tables` | Показать список всех таблиц в базе данных |
| `drop_table <имя>` | Удалить указанную таблицу |
| `help` | Показать справочную информацию по командам |
| `exit` | Выйти из программы |

## Использование

Примеры использования:
### Создание таблицы пользователей
```bash
create_table users name:str age:int active:bool
```
### Просмотр всех таблиц
```bash
list_tables
```
### Удаление таблицы
```bash
drop_table users
```

## Особенности
- Поддерживаемые типы данных: int, str, bool
- Автоматический ключ: При создании таблицы автоматически добавляется столбец ID:int
- Простой синтаксис: Интуитивно понятные команды для работы с данными

## Демонстрация Управлением таблиц
[![asciicast](https://asciinema.org/a/fOFESBdV4t2JTkScsmZ1SKBev.svg)](https://asciinema.org/a/fOFESBdV4t2JTkScsmZ1SKBev)

## В демонстрации показано:
- Установка пакета
- Запуск базы данных
- Создание таблиц
- Просмотр списка таблиц
- Удаление таблиц

## Технические детали
- Язык: Python 3.13
- Управление зависимостями: Poetry
- Формат хранения: JSON
- Архитектура: Процедурное программирование

## Демонстрация работы CRUD
[![asciicast](https://asciinema.org/a/VEqtw5t4HSzBPs1mi2HnuAfS0.svg)](https://asciinema.org/a/VEqtw5t4HSzBPs1mi2HnuAfS0)

##  Работа с данными (CRUD) Основные команды

| Команда | Синтаксис | Описание | Пример |
|---------|-----------|-----------|---------|
| **INSERT** | `insert <таблица> <значение1> <значение2> ...` | Добавить новую запись в таблицу | `insert users 1 "Анна Иванова" anna@mail.ru 25` |
| **SELECT** | `select <таблица> [WHERE условие]` | Выбрать записи из таблицы | `select users WHERE age > 30` |
| **UPDATE** | `update <таблица> SET поле=значение WHERE условие` | Обновить записи по условию | `update users SET age=26 WHERE id=1` |
| **DELETE** | `delete <таблица> WHERE условие` | Удалить записи по условию | `delete users WHERE id=5` |

## Примеры команд:
  - insert users "John" 28 true
  - select users
  - select users WHERE age = 28
  - update users SET age = 30 WHERE name = "John"
  - delete users WHERE ID = 1

## Декораторы и замыкания

### Декораторы
Система включает три специализированных декоратора для повышения надежности и удобства работы:

#### @handle_db_errors
Автоматическая обработка ошибок базы данных. Перехватывает и логирует исключения:
- `FileNotFoundError` - файл не найден
- `KeyError` - ключ не найден в данных
- `ValueError` - неверное значение
- `TypeError` - несоответствие типов
- `PermissionError` - недостаточно прав доступа
- Прочие общие исключения

Применяется ко всем функциям в `core.py`, обеспечивая стабильную работу системы.

#### @confirm_action(action_name)
Запрашивает подтверждение пользователя перед выполнением потенциально опасных операций.
Применяется к:
- `drop_table()` - удаление таблицы
- `delete()` - удаление записей

Пользователю необходимо ввести "yes" для подтверждения действия.

#### @log_time
Измеряет и выводит время выполнения функции в секундах.
Позволяет отслеживать производительность операций с базой данных.

### Кэширование результатов

#### create_cacher()
Функция с замыканием для кэширования результатов SELECT-запросов.
Предоставляет методы:
- `cache(key, value)` - сохранить результат в кэш
- `get_cache(key)` - получить закэшированный результат
- `clear_cache()` - очистить весь кэш
- `remove_cache(key)` - удалить конкретную запись из кэша
Фунция повышает производительность при повторных запросах с одинаковыми условиями.